
<%= form_tag weekly_stats_path, method: :get do %>
  <%= label_tag :week_number, "Week Number" %>
  <%= number_field_tag :week_number, params[:week_number] || Date.today.cweek, min: 1, max: 52, step: 1 %>
  <%= submit_tag "View Stats" %>
<% end %>

<%= button_to 'Email Weekly Stats', send_weekly_stats_email_reports_path, method: :post, class: 'my-2' %>

<%= render partial: 'reports/weekly_stats',
           locals: { week_number: @week_number,
                     start_date_string: @start_date_string,
                     lords_day_this_week: @lords_day_this_week,
                     lords_days_data: @lords_days_data,
                     prayer_meeting_this_week: @prayer_meeting_this_week,
                     prayer_meetings_data: @prayer_meetings_data,
                     small_groups_this_week: @small_groups_this_week,
                     small_groups_data: @small_groups_data,
                     small_groups_multi_data: @small_groups_multi_data,
                     current_week_small_groups_data: @current_week_small_groups_data
                     } %>


<%= link_to "Previous Week", weekly_stats_path(week_number: @week_number - 1) %>
<%= link_to "Next Week", weekly_stats_path(week_number: @week_number + 1) %>
